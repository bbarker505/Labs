"0","# Initialize an object for degree-day accumulation"
"0","dd_accum <- 0"
"0",""
"0","# Step through years"
"0","for (j in 1:length(years)) {"
"0",""
"0","  # Weather data for year plus column names (skip column 7 with comments)"
"0","  weath_data <- read_table(file = here(""Lab3_phenology_models"", ""weather_data"", all_files[j]),"
"0","                         skip = 1, col_names = FALSE,"
"0","                         col_types = cols(X7 = col_skip())) %>%"
"0","  data.frame() %>%"
"0","  rename(c(""month"" = 1, ""day"" = 2, ""tmax"" = 3, ""tmin"" = 4, ""prec"" = 5, ""dd50"" = 6))"
"0","  "
"0","  # Days of year in data (365 for non-leap years, 366 for leap years)"
"0","  number_of_days <- nrow(weath_data)"
"0","    "
"0","  # Initialize an object for degree-day accumulation"
"0","  dd_accum <- 0"
"0","  "
"0","  # Step through days (same daily loop as above)"
"0","  for (i in 1:number_of_days) {"
"0","  "
"0","    # Tmin and Tmax for day, but convert from degrees F to C"
"0","    tmax <- weath_data$tmax[i]"
"0","    tmin <- weath_data$tmin[i]"
"0","    "
"0","    # Use simple average DDs, more complex formulas are available and preferable"
"0","    dd_today <- (tmax + tmin)/2 - LDT"
"0","  "
"0","    # Can't have negative degree-days (change to 0)"
"0","    if (dd_today < 0) {"
"0","      dd_today <- 0"
"0","    }"
"0","  "
"0","    # Accumulate degree-days"
"0","    dd_accum <- dd_accum + dd_today"
"0",""
"0","    # Add results to output data frame"
"0","    out_all2 <- rbind("
"0","      out_all2, data.frame(""doy"" = i,"
"0","                         ""month"" = weath_data$month[i],"
"0","                         ""day"" = weath_data$day[i],"
"0","                         ""year"" = years[j],"
"0","                         ""dd_today"" = dd_today,"
"0","                         ""dd_accum"" = dd_accum)"
"0","      )"
"0","  }"
"0","  "
"0","}"
