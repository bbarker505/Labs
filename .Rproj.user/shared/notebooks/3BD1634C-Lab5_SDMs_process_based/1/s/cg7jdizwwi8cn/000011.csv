"0","# Weather inputs and outputs"
"0","vars <- c(""tmin"", ""tmax"")"
"0","fls_list <- c(""tminfiles"", ""tmaxfiles"")"
"0",""
"0","# Get raster files for each temperature variable"
"0","for (i in 1:length(vars)) {"
"0","  "
"0","  # List files by variable (pattern)"
"0","  fl_pat <- glob2rx(paste0(""*PRISM_"", vars[i], ""*.tif$*""))"
"0","  fls <- list.files(path = prism_dir, pattern = fl_pat, full.names = TRUE)"
"0","  assign(fls_list[i], fls)"
"0","}"
"0",""
"0","# Extract date from temperature files using regex pattern matching"
"0","dats <- unique(regmatches(tminfiles, regexpr(pattern = ""[0-9]{8}"", "
"0","                                             text = tminfiles)))"
"0",""
"0","## Create blank template from a temp file"
"0","# This template is used for cropping the temperature (tmin, tmax) rasters"
"0","template <- rast(tminfiles[1]) # Template "
"0","template[!is.na(template)] <- 0"
"0","extent <- ext(template)"
"0",""
"0","## Initialize all tracking rasters as zero with the template"
"0","# Phenology"
"0","DDtotal     <- template"
"0","DDaccum     <- template"
"0","Lifestage   <- template"
"0","NumGen      <- template"
"0",""
"0","# Cold/heat stress units"
"0","coldmask         <- template  # binary mask for daily cold stress units"
"0","coldstress       <- template  # count of daily cold stress units"
"0","coldunitsCUM     <- template  # cumulative cold sterss units"
"0","coldstressTHRESH <- coldstress_threshold # mask for cold stress units threshold"
"0","coldstressMAX1   <- coldstress_units_max1 # use for max cold stress before mortality??"
"0","coldstressMAX2   <- coldstress_units_max2 # use for uncertainty zone max cold stress before mortality??"
"0","coldEXCL          <- template  # EXCL map for cold stress"
"0","heatmask          <- template  # binary mask for daily heat stress units"
"0","heatstress        <- template  # use for heat stress units"
"0","heatunitsCUM      <- template  # cumulative heat stress units"
"0","heatstressTHRESH  <- heatstress_threshold # mask for heatstress units threshold"
"0","heatstressMAX1    <- heatstress_units_max1 # use for max heat before mortality?"
"0","heatstressMAX2    <- heatstress_units_max2 # use for max heat before mortality?"
"0","heatEXCL          <- template  # EXCL map for heat stress"
"0","allEXCL           <- template  # EXCL map for combined stresses (cold,heat,later: moisture)"
